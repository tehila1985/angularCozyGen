@if (product) {
<div class="product-page-container">
  <div class="gallery-layout">
    <div class="thumb-list">
      <img 
        [src]="product.frontImageUrl" 
        (click)="activeImage = product.frontImageUrl"
        [class.selected]="activeImage === product.frontImageUrl">
      <img 
        [src]="product.backImageUrl" 
        (click)="activeImage = product.backImageUrl"
        [class.selected]="activeImage === product.backImageUrl">
    </div>
    <div class="main-display">
      <img [src]="activeImage || product.frontImageUrl">
    </div>
  </div>
  <div class="product-details">
    <span class="category-path">
      @if (product.categoryName) {
        {{ product.categoryName }}
        @if (product.styleName) {
          / {{ product.styleName }}
        }
      }
    </span>
    <h1 class="item-name">
      {{ product.name }}
    </h1>
    <div class="price">
      ₪{{ product.price }}
    </div>
    
    <p class="product-description">{{ product.description }}</p>
    
    <div class="stock-info" [class.out-of-stock]="product.stock === 0" [class.low-stock]="product.stock > 0 && product.stock <= 5">
      @if (product.stock > 0 && product.stock <= 5) {
        <i class="pi pi-clock"></i>
        <span>מהרו! נותרו רק {{ product.stock }} יחידות</span>
      } @else if (product.stock > 0) {
        <span>במלאי</span>
      } @else {
        <span>אזל מהמלאי</span>
      }
    </div>
    
    <div class="buy-box">
      <div class="qty-control">
        <button (click)="qty = qty > 1 ? qty - 1 : 1" [disabled]="product.stock === 0">-</button>
        <span>{{ qty }}</span>
        <button (click)="qty = qty + 1" [disabled]="product.stock === 0 || qty >= product.stock">+</button>
      </div>
      <button class="add-btn" (click)="addToCart()" [disabled]="product.stock === 0">
        @if (product.stock > 0) {
          הוספה לסל הקניות
        } @else {
          אזל מהמלאי
        }
      </button>
    </div>
    <div class="info-footer">
      <p><span>משלוח:</span> עד 7 ימי עסקים</p>
      <p><span>חומרים:</span> חומרי פרימיום בגימור פרימיום</p>
    </div>
  </div>
</div>
}
